!function(t){"use strict";function p(e,a){this.ACTIVE_CLASS="open",this.init=function(){var a=this;e.on("click",".popup-overlay, .button-close-popup",function(e){e.preventDefault(),e.stopPropagation(),a.close()})},this.open=function(){t(".unicamp-popup").UnicampPopup("close"),e.addClass(this.ACTIVE_CLASS)},this.close=function(){e.removeClass(this.ACTIVE_CLASS)}}t.fn.UnicampPopup=function(e){var a="string"==typeof e?e:void 0;if(a){var o=[];this.each(function(){var e=t(this).data("UnicampPopup");o.push(e)});var n=1<arguments.length?Array.prototype.slice.call(arguments,1):void 0,s=[];return this.each(function(e){e=o[e];if(!e)return console.warn("$.UnicampPopup not instantiated yet"),console.info(this),void s.push(void 0);"function"==typeof e[a]?(e=e[a].apply(e,n),s.push(e)):console.warn("Method '"+a+"' not defined in $.UnicampPopup")}),1<s.length?s:s[0]}return this.each(function(){var e=t(this),a=new p(e);e.data("UnicampPopup",a),a.init()})}}(jQuery),function(p){"use strict";p(document).ready(function(){var e=$unicampLogin.validatorMessages;jQuery.extend(jQuery.validator.messages,{required:e.required,remote:e.remote,email:e.email,url:e.url,date:e.date,dateISO:e.dateISO,number:e.number,digits:e.digits,creditcard:e.creditcard,equalTo:e.equalTo,accept:e.accept,maxlength:jQuery.validator.format(e.maxlength),minlength:jQuery.validator.format(e.minlength),rangelength:jQuery.validator.format(e.rangelength),range:jQuery.validator.format(e.range),max:jQuery.validator.format(e.max),min:jQuery.validator.format(e.min)});var e=p("body"),o=p("#popup-pre-loader"),a=p("#popup-user-login"),n=p("#popup-user-register"),s=p("#popup-user-lost-password");function t(){a.hasClass("popup-loaded")?a.UnicampPopup("open"):p.ajax({url:$unicamp.ajaxurl,type:"GET",cache:!1,dataType:"html",data:{action:"unicamp_lazy_load_template",template:a.data("template")},success:function(e){a.find(".popup-content-inner").html(e),a.addClass("popup-loaded"),a.UnicampPopup("open"),a.find(".mo-openid-app-icons .mo_btn-social").removeAttr("style"),a.find(".mo-openid-app-icons .mo_btn-social .mofa").removeAttr("style"),a.find(".mo-openid-app-icons .mo_btn-social svg").removeAttr("style"),a.find("#unicamp-login-form").validate({rules:{user_login:{required:!0},password:{required:!0}},submitHandler:function(e){var a=p(e);p.ajax({url:$unicamp.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),""!==e.redirect_url?window.location.href=e.redirect_url:location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon")}})}})},error:function(e,a,o){console.log(o)},beforeSend:function(){p(".unicamp-popup").UnicampPopup("close"),o.addClass("open")},complete:function(){o.removeClass("open")}})}p(".unicamp-popup").UnicampPopup(),e.hasClass("required-login")&&!e.hasClass("logged-in")&&t(),e.on("click",".open-popup-login",function(e){e.preventDefault(),e.stopPropagation(),t()}),e.on("click",".open-popup-register",function(e){e.preventDefault(),e.stopPropagation(),n.hasClass("popup-loaded")?n.UnicampPopup("open"):p.ajax({url:$unicamp.ajaxurl,type:"GET",cache:!1,dataType:"html",data:{action:"unicamp_lazy_load_template",template:n.data("template")},success:function(e){n.find(".popup-content-inner").html(e),n.addClass("popup-loaded"),n.UnicampPopup("open"),n.find("#unicamp-register-form").validate({rules:{firstname:{required:!0},lastname:{required:!0},username:{required:!0,minlength:4},email:{required:!0,email:!0},password:{required:!0,minlength:8,maxlength:30},password2:{required:!0,minlength:8,maxlength:30,equalTo:"#ip_reg_password"}},submitHandler:function(e){var a=p(e);p.ajax({url:$unicamp.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon")}})}})},error:function(e,a,o){console.log(o)},beforeSend:function(){p(".unicamp-popup").UnicampPopup("close"),o.addClass("open")},complete:function(){o.removeClass("open")}})}),e.on("click",".open-popup-lost-password",function(e){e.preventDefault(),e.stopPropagation(),s.hasClass("popup-loaded")?s.UnicampPopup("open"):p.ajax({url:$unicamp.ajaxurl,type:"GET",cache:!1,dataType:"html",data:{action:"unicamp_lazy_load_template",template:s.data("template")},success:function(e){s.find(".popup-content-inner").html(e),s.addClass("popup-loaded"),s.UnicampPopup("open"),s.find("#unicamp-lost-password-form").submit(function(e){e.preventDefault();var a=p(this);p.ajax({type:"post",url:$unicamp.ajaxurl,dataType:"json",data:a.serialize(),success:function(e){(e.success?a.find(".form-response-messages").html(e.messages).addClass("success"):a.find(".form-response-messages").html(e.messages).addClass("error")).show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon")}})})},error:function(e,a,o){console.log(o)},beforeSend:function(){p(".unicamp-popup").UnicampPopup("close"),o.addClass("open")},complete:function(){o.removeClass("open")}})}),e.on("click",".open-popup-instructor-register",function(e){var a;e.preventDefault(),e.stopPropagation(),(a=p("#unicamp-popup-instructor-register")).hasClass("popup-loaded")?a.UnicampPopup("open"):p.ajax({url:$unicamp.ajaxurl,type:"GET",cache:!1,dataType:"html",data:{action:"unicamp_lazy_load_template",template:a.data("template")},success:function(e){a.find(".popup-content-inner").html(e),a.addClass("popup-loaded"),a.UnicampPopup("open"),a.find("form").validate({rules:{fullname:{required:!0},email:{required:!0,email:!0},password:{required:!0,minlength:8,maxlength:30}},submitHandler:function(e){var a=p(e);p.ajax({url:$unicamp.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),e.redirect&&location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon")}})}})},error:function(e,a,o){console.log(o)},beforeSend:function(){p(".unicamp-popup").UnicampPopup("close"),o.addClass("open")},complete:function(){o.removeClass("open")}})}),e.on("click",".btn-pw-toggle",function(e){e.preventDefault(),e.stopPropagation();var a=p(this).parent(".form-input-password"),e=a.children("input");"password"===e.attr("type")?(e.attr("type","text"),a.addClass("show-pw")):(e.attr("type","password"),a.removeClass("show-pw"))})})}(jQuery);