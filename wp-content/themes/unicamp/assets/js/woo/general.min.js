!function(v){"use strict";v.fn.serializeArrayAll=function(){var i=/\r?\n/g;return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).map(function(t,e){var a=jQuery(this).val();return null==a||("checkbox"==this.type&&0==this.checked?{name:this.name,value:this.checked?this.value:""}:jQuery.isArray(a)?jQuery.map(a,function(t,a){return{name:e.name,value:t.replace(i,"\r\n")}}):{name:e.name,value:a.replace(i,"\r\n")})}).get()};var n=v("body");function r(t,a){a.removeClass("loading"),v.magnificPopup.open({mainClass:"mfp-fade popup-product-quick-view",items:{src:t.html(),type:"inline"},callbacks:{open:function(){var t=this.content.find(".product-container"),a=window.innerHeight,a=parseInt(a-60),a=Math.min(a,760);t.outerHeight(a),t.perfectScrollbar({suppressScrollX:!0});var a=this.content.find(".woo-single-gallery"),t=a.children(".unicamp-thumbs-swiper").UnicampSwiper(),p=a.children(".unicamp-main-swiper").UnicampSwiper({thumbs:{swiper:t}});"undefined"!=typeof isw&&void 0!==isw.Swatches&&isw.Swatches.init(),"undefined"!=typeof wc_add_to_cart_variation_params&&this.content.find(".variations_form").each(function(){v(this).wc_variation_form()});var m=this.content.find(".variations_form"),f=m.data("product_variations");m.find("select").on("change",function(){for(var t=!0,a=!1,e={},i=m.serializeArray(),n=0;n<i.length;n++){var r=i[n].name;if("attribute_"===r.substring(0,10)&&(e[r]=i[n].value,""===i[n].value)){t=!1;break}}if(!0===t){for(var o=Object.entries(e),c=0,d=0,n=f.length-1;0<=n;n--){var s=f[n],u=Object.entries(s.attributes),l=0;u.forEach(([e,i])=>{o.forEach(([t,a])=>{t===e&&(a!==i&&""!==i||l++)})}),d<l&&(d=l,c=s.image_id)}c?p.$wrapperEl.find(".swiper-slide").each(function(t){var a=v(this).attr("data-image-id");if((a=parseInt(a))===c)return p.slideTo(t),!1}):a=!0}else a=!0;a&&(a=p.$wrapperEl.find(".product-main-image").index(),p.slideTo(a))})}}})}v(document).ready(function(){var i;v(".unicamp-product").on("click",".quick-view-btn",function(t){t.preventDefault(),t.stopPropagation();var a=v(this);a.parents(".product-actions").first().addClass("refresh"),a.addClass("loading");var t=a.data("pid"),e=n.children("#popup-product-quick-view-content-"+t);0<e.length?r(e,a):v.ajax({url:$unicamp.ajaxurl,type:"POST",data:v.param({action:"product_quick_view",pid:t}),dataType:"json",success:function(t){e=v(t.template),n.append(e),r(e,a)}})}),i=[],n.on("click",".ajax_add_to_cart",function(){var t=v(this).parents(".cart-notification").first().data("notification"),a='<span class="added-text">'+$unicamp.noticeAddedCartText+"</span>",e=a;void 0!==t&&(e='<div class="product-added-cart">',""!==t.image&&(e+='<div class="product-thumbnail"><img src="'+t.image+'" alt="'+t.title+'"/></div>'),e+='<div class="product-caption"><h3 class="product-title">'+t.title+" </h3>"+a+"</div>",e+="</div>"),e+='<div class="tm-button-wrapper btn-view-cart"><a href="'+$unicamp.noticeCartUrl+'" class="tm-button button-grey style-flat tm-button-xs tm-button-full-wide">'+$unicamp.noticeCartText+"</a></div>",i.push(e)}),n.on("added_to_cart",function(){for(var t=0;t<i.length;t++){var a=i[t];v.growl({location:"br",duration:5e3,title:"",message:a}),i.splice(t,1)}}),v(document).on("click",".single_add_to_cart_button:not(.disabled)",function(t){var e=v(this),i=e.closest("form.cart"),a=i.find('input:not([name="product_id"]), select, button, textarea').serializeArrayAll()||0;return v.each(a,function(t,a){"add-to-cart"==a.name&&(a.name="product_id",a.value=i.find("input[name=variation_id]").val()||e.val())}),t.preventDefault(),v(document.body).trigger("adding_to_cart",[e,a]),v.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:a,beforeSend:function(t){e.removeClass("added").addClass("loading updating-icon")},complete:function(t){e.addClass("added").removeClass("loading updating-icon")},success:function(t){t.error&t.product_url?window.location=t.product_url:v(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e])}}),!1})})}(jQuery);